{% extends "base.html" %}

{% block title %}Nodeseek OAuth2 授权服务 - 首页{% endblock %}

{% block head %}
<style>
    .hero-section {
        padding: 60px 0;
        text-align: center;
    }
    
    .hero-title {
        font-weight: 700;
        margin-bottom: 24px;
        color: var(--text-color);
    }
    
    .hero-subtitle {
        color: var(--muted-color);
        font-size: 1.2rem;
        margin-bottom: 32px;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
    }
    
    .feature-card {
        height: 100%;
        transition: transform 0.2s;
    }
    
    .feature-card:hover {
        transform: translateY(-5px);
    }
    
    .feature-icon {
        width: 48px;
        height: 48px;
        border-radius: 12px;
        background-color: #f5f7ff;
        color: var(--primary-color);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        margin-bottom: 16px;
    }
    
    .user-info-card {
        background-color: #f8fafc;
        border-radius: 12px;
        padding: 24px;
        text-align: left;
        display: flex;
        align-items: center;
        margin: 32px auto;
        max-width: 400px;
    }
    
    .user-info-card .user-avatar {
        width: 60px;
        height: 60px;
        font-size: 1.8rem;
    }
    
    .call-to-action {
        margin-top: 24px;
    }
</style>
{% endblock %}

{% block content %}
<div class="hero-section">
    <div class="container">
        <h1 class="hero-title">Nodeseek OAuth2 授权服务</h1>
        <p class="hero-subtitle">使用您的 Nodeseek 账号安全授权第三方应用，保护您的隐私和数据安全</p>
        
        {% if user %}
        <div class="user-info-card fade-in">
            <div class="user-avatar me-4">{{ user.name[:1] }}</div>
            <div>
                <div class="text-muted mb-1">已登录账号</div>
                <div class="fw-bold fs-4">{{ user.name }}</div>
                <div class="level-badge mt-1">等级 {{ user.rank }}</div>
            </div>
        </div>
        
        <div class="call-to-action">
            <a href="/clients" class="btn btn-primary btn-lg px-4 me-2"><i class="bi bi-grid me-2"></i>管理我的应用</a>
            <a href="/logout" class="btn btn-outline-danger"><i class="bi bi-box-arrow-right me-2"></i>退出登录</a>
        </div>
        {% else %}
        <a href="/login" class="btn btn-primary btn-lg px-4 py-2"><i class="bi bi-person me-2"></i>立即登录</a>
        {% endif %}
    </div>
</div>

<div class="container py-5">
    <div class="row g-4">
        <div class="col-md-4">
            <div class="card feature-card p-4">
                <div class="feature-icon">
                    <i class="bi bi-shield-check"></i>
                </div>
                <h3 class="h5">安全认证</h3>
                <p class="text-muted">使用您的 Nodeseek 账号进行安全的身份验证，无需创建新账号</p>
            </div>
        </div>
        
        <div class="col-md-4">
            <div class="card feature-card p-4">
                <div class="feature-icon">
                    <i class="bi bi-key"></i>
                </div>
                <h3 class="h5">权限管理</h3>
                <p class="text-muted">清晰了解并控制第三方应用可访问的信息范围</p>
            </div>
        </div>
        
        <div class="col-md-4">
            <div class="card feature-card p-4">
                <div class="feature-icon">
                    <i class="bi bi-lock"></i>
                </div>
                <h3 class="h5">数据保护</h3>
                <p class="text-muted">您的 Nodeseek 账号密码不会被分享给第三方应用</p>
            </div>
        </div>
    </div>
    
    <div class="card mt-5 p-4">
        <h3 class="h4 mb-3">关于 OAuth2 授权</h3>
        <p>
            OAuth2 是一种安全的授权协议，它允许您授权第三方应用访问您的账号信息，而无需提供您的账号密码。通过 OAuth2，您可以随时查看和撤销已授权的应用权限。
        </p>
        
        <div class="mt-4">
            <h4 class="h5 mb-2">授权流程</h4>
            <ol>
                <li class="mb-2">第三方应用请求访问您的 Nodeseek 账号信息</li>
                <li class="mb-2">您使用 Nodeseek 账号登录此授权服务</li>
                <li class="mb-2">您查看并确认授予的权限</li>
                <li class="mb-2">您授权后，第三方应用获得有限的访问权限</li>
                <li>您可以随时撤销授权</li>
            </ol>
        </div>
        
        {% if user and user.rank >= 5 %}
        <div class="mt-4 text-center">
            <h4 class="h5 mb-3">开发者功能</h4>
            <p>您可以创建自己的OAuth应用，将Nodeseek账号授权集成到您的网站或应用中</p>
            <a href="/clients/new" class="btn btn-primary"><i class="bi bi-plus-lg me-2"></i>创建新应用</a>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}